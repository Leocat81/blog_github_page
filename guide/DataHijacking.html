<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>简单模拟数据劫持 | 笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog_github_page/img/panda4.png">
    <meta name="description" content="欢迎来到我的博客">
    <meta name="image" content="http://pipepandafeng.gitee.io/../assets/datahijack.png">
    <meta name="twitter:title" content="简单模拟数据劫持">
    <meta name="twitter:description" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="http://pipepandafeng.gitee.io/../assets/datahijack.png">
    <meta name="twitter:url" content="http://pipepandafeng.gitee.io/guide/DataHijacking.html">
    <meta name="twitter:creator" content="@pipe">
    <meta name="twitter:site" content="@pipe">
    <meta property="og:type" content="article">
    <meta property="og:title" content="简单模拟数据劫持">
    <meta property="og:description" content="">
    <meta property="og:image" content="http://pipepandafeng.gitee.io/../assets/datahijack.png">
    <meta property="og:url" content="http://pipepandafeng.gitee.io/guide/DataHijacking.html">
    <meta property="og:site_name" content="blog_github_page">
    <meta property="article:author" content="司俊峰">
    <meta itemprop="name" content="简单模拟数据劫持">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://pipepandafeng.gitee.io/../assets/datahijack.png">
    
    <link rel="preload" href="/blog_github_page/assets/css/0.styles.dda69d12.css" as="style"><link rel="preload" href="/blog_github_page/assets/js/app.f54d6109.js" as="script"><link rel="preload" href="/blog_github_page/assets/js/2.50563eee.js" as="script"><link rel="preload" href="/blog_github_page/assets/js/3.1735bb09.js" as="script"><link rel="prefetch" href="/blog_github_page/assets/js/10.4d95423c.js"><link rel="prefetch" href="/blog_github_page/assets/js/11.bcdf5f16.js"><link rel="prefetch" href="/blog_github_page/assets/js/12.3aae638c.js"><link rel="prefetch" href="/blog_github_page/assets/js/13.7d8b64c5.js"><link rel="prefetch" href="/blog_github_page/assets/js/14.654d5145.js"><link rel="prefetch" href="/blog_github_page/assets/js/15.acfd6509.js"><link rel="prefetch" href="/blog_github_page/assets/js/16.b4aa2275.js"><link rel="prefetch" href="/blog_github_page/assets/js/17.2e338599.js"><link rel="prefetch" href="/blog_github_page/assets/js/18.912648f2.js"><link rel="prefetch" href="/blog_github_page/assets/js/19.529496eb.js"><link rel="prefetch" href="/blog_github_page/assets/js/20.5bf50cfb.js"><link rel="prefetch" href="/blog_github_page/assets/js/21.fd76d98f.js"><link rel="prefetch" href="/blog_github_page/assets/js/22.164cc6b2.js"><link rel="prefetch" href="/blog_github_page/assets/js/23.28cf816e.js"><link rel="prefetch" href="/blog_github_page/assets/js/24.1d887cdc.js"><link rel="prefetch" href="/blog_github_page/assets/js/25.b728ee8c.js"><link rel="prefetch" href="/blog_github_page/assets/js/26.84ecb55c.js"><link rel="prefetch" href="/blog_github_page/assets/js/27.2df25052.js"><link rel="prefetch" href="/blog_github_page/assets/js/28.48a54c31.js"><link rel="prefetch" href="/blog_github_page/assets/js/29.b6975052.js"><link rel="prefetch" href="/blog_github_page/assets/js/4.5a6bb536.js"><link rel="prefetch" href="/blog_github_page/assets/js/5.0edde7bc.js"><link rel="prefetch" href="/blog_github_page/assets/js/6.60ddd6e1.js"><link rel="prefetch" href="/blog_github_page/assets/js/7.38da5984.js"><link rel="prefetch" href="/blog_github_page/assets/js/8.de97260d.js"><link rel="prefetch" href="/blog_github_page/assets/js/9.b4cdcd64.js">
    <link rel="stylesheet" href="/blog_github_page/assets/css/0.styles.dda69d12.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog_github_page/" class="home-link router-link-active"><!----> <span class="site-name">笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/yisainan/web-interview" target="_blank" rel="noopener noreferrer" class="nav-link external">
  面试宝典
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://hcysun.me/vue-design/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue原理讲解
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/ljianshu/Blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端工匠
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://ts.xcatliu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  typescript入门教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://gitee.com/pipepandafeng/blog_vuecode" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/yisainan/web-interview" target="_blank" rel="noopener noreferrer" class="nav-link external">
  面试宝典
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://hcysun.me/vue-design/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue原理讲解
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/ljianshu/Blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端工匠
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://ts.xcatliu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  typescript入门教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://gitee.com/pipepandafeng/blog_vuecode" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ECMAScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog_github_page/guide/" aria-current="page" class="sidebar-link">手写 Promise</a></li><li><a href="/blog_github_page/guide/a.html" class="sidebar-link">普通函数和构造函数区别</a></li><li><a href="/blog_github_page/guide/prototype.html" class="sidebar-link">理解原型对象</a></li><li><a href="/blog_github_page/guide/ArrowDifNomal.html" class="sidebar-link">箭头函数和普通函数的区别</a></li><li><a href="/blog_github_page/guide/reduce.html" class="sidebar-link">reduce 函数</a></li><li><a href="/blog_github_page/guide/DataHijacking.html" aria-current="page" class="active sidebar-link">简单模拟数据劫持</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_github_page/guide/DataHijacking.html#对象的属性类型" class="sidebar-link">对象的属性类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_github_page/guide/DataHijacking.html#一-数据属性" class="sidebar-link">一 ： 数据属性</a></li><li class="sidebar-sub-header"><a href="/blog_github_page/guide/DataHijacking.html#二-访问器属性" class="sidebar-link">二 ：访问器属性</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog_github_page/guide/DataHijacking.html#数据劫持" class="sidebar-link">数据劫持</a></li></ul></li><li><a href="/blog_github_page/guide/lowcopyAnddeepCopy.html" class="sidebar-link">数组的深拷贝和浅拷贝</a></li><li><a href="/blog_github_page/guide/VariableAndFunction.html" class="sidebar-link">js中变量提升和函数声明提升</a></li><li><a href="/blog_github_page/guide/transmitParams.html" class="sidebar-link">传递参数注意事项</a></li><li><a href="/blog_github_page/guide/bibao.html" class="sidebar-link">闭包</a></li><li><a href="/blog_github_page/guide/debounceAndThrottle.html" class="sidebar-link">防抖和节流</a></li><li><a href="/blog_github_page/guide/es6new.html" class="sidebar-link">es6新特性</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>VUE</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>http协议</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>html</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>http协议</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default" data-v-5ff90988 data-v-5ff90988><h1 id="简单模拟数据劫持" data-v-5ff90988><a href="#简单模拟数据劫持" class="header-anchor" data-v-5ff90988>#</a> 简单模拟数据劫持</h1> <p data-v-5ff90988>在实现简单模拟数据劫持之前，让我们先来了解一下 ECMAScript 对象的属性类型</p> <h2 id="对象的属性类型" data-v-5ff90988><a href="#对象的属性类型" class="header-anchor" data-v-5ff90988>#</a> 对象的属性类型</h2> <p data-v-5ff90988>ECMAScript 中有两种属性：<span class="point_text" data-v-5ff90988>数据属性</span>和<span class="point_text" data-v-5ff90988>访问器属性</span>。</p> <h3 id="一-数据属性" data-v-5ff90988><a href="#一-数据属性" class="header-anchor" data-v-5ff90988>#</a> 一 ： 数据属性</h3> <p data-v-5ff90988>数据属性包含一个数据值的位置。在这个位置可以读取和写入值。数据属性有 4 个描述其行为的特性。</p> <ul data-v-5ff90988><li data-v-5ff90988>[[Configurable]]：表示能否通过 delete 删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为访问器属性。默认值为 true。</li> <li data-v-5ff90988>[[Enumberable]]：表示能否通过 for-in 循环返回属性。默认值为 true。</li> <li data-v-5ff90988>[[Writable]]：表示能否修改属性的值。默认值为 true。</li> <li data-v-5ff90988>[[Value]]：包含这个属性的数据值。读取属性值的时候，从这个位置读；写入属性值的时候，把新值保存在这个位置。默认值为 undefined。</li></ul> <p data-v-5ff90988><span class="point_text" data-v-5ff90988>要修改属性默认的特性，必须使用 ES5 的 Object.defineProperty()方法。</span></p> <div class="language-JS line-numbers-mode" data-v-5ff90988><div class="highlight-lines" data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><div class="highlighted" data-v-5ff90988> </div><div class="highlighted" data-v-5ff90988> </div><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988></div><pre class="language-js" data-v-5ff90988><code data-v-5ff90988><span class="token keyword" data-v-5ff90988>let</span> person <span class="token operator" data-v-5ff90988>=</span> <span class="token punctuation" data-v-5ff90988>{</span><span class="token punctuation" data-v-5ff90988>}</span>
Object<span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>defineProperty</span><span class="token punctuation" data-v-5ff90988>(</span>person<span class="token punctuation" data-v-5ff90988>,</span> <span class="token string" data-v-5ff90988>'name'</span><span class="token punctuation" data-v-5ff90988>,</span> <span class="token punctuation" data-v-5ff90988>{</span>

    configurable<span class="token operator" data-v-5ff90988>:</span><span class="token boolean" data-v-5ff90988>false</span><span class="token punctuation" data-v-5ff90988>,</span>  <span class="token comment" data-v-5ff90988>// 不能删除该属性,不能修改属性的特性，不能访问访问器属性</span>
    writable<span class="token operator" data-v-5ff90988>:</span><span class="token boolean" data-v-5ff90988>false</span><span class="token punctuation" data-v-5ff90988>,</span> <span class="token comment" data-v-5ff90988>// 不能进行赋值操作</span>
    value<span class="token operator" data-v-5ff90988>:</span><span class="token string" data-v-5ff90988>'Niko'</span>

<span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>)</span>
console<span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>log</span><span class="token punctuation" data-v-5ff90988>(</span>person<span class="token punctuation" data-v-5ff90988>.</span>name<span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span> <span class="token comment" data-v-5ff90988>// 'Niko'</span>
<span class="token keyword" data-v-5ff90988>delete</span> person<span class="token punctuation" data-v-5ff90988>.</span>name <span class="token comment" data-v-5ff90988>// 因为configurable为false, 在删除属性操作           非严格模式下不会发生任何操作，在严格模式下报错</span>
console<span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>log</span><span class="token punctuation" data-v-5ff90988>(</span>person<span class="token punctuation" data-v-5ff90988>.</span>name<span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span> <span class="token comment" data-v-5ff90988>// 'Niko'</span>

console<span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>log</span><span class="token punctuation" data-v-5ff90988>(</span>person<span class="token punctuation" data-v-5ff90988>.</span>name<span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span> <span class="token comment" data-v-5ff90988>// 'Niko'</span>
 person<span class="token punctuation" data-v-5ff90988>.</span>name<span class="token operator" data-v-5ff90988>=</span><span class="token string" data-v-5ff90988>'Simple'</span> <span class="token comment" data-v-5ff90988>// 因为writable为false, 故赋值操作在非严格模式下不会发生任何操作，在严格模式下报错</span>
console<span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>log</span><span class="token punctuation" data-v-5ff90988>(</span>person<span class="token punctuation" data-v-5ff90988>.</span>name<span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span> <span class="token comment" data-v-5ff90988>// 'Niko'</span>

</code></pre><div class="line-numbers-wrapper" data-v-5ff90988><span class="line-number" data-v-5ff90988>1</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>2</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>3</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>4</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>5</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>6</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>7</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>8</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>9</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>10</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>11</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>12</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>13</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>14</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>15</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>16</span><br data-v-5ff90988></div></div><p data-v-5ff90988><span class="warn_text" data-v-5ff90988>Object.defineProperty()方法可以被调用多次，但是把 configurable 特性设置为 false 之后就会有限制了。见下面例子：</span></p> <div class="language-js line-numbers-mode" data-v-5ff90988><div class="highlight-lines" data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><div class="highlighted" data-v-5ff90988> </div><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988><div class="highlighted" data-v-5ff90988> </div><br data-v-5ff90988><br data-v-5ff90988><br data-v-5ff90988></div><pre class="language-js" data-v-5ff90988><code data-v-5ff90988><span class="token keyword" data-v-5ff90988>let</span> person <span class="token operator" data-v-5ff90988>=</span> <span class="token punctuation" data-v-5ff90988>{</span><span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>;</span>
Object<span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>defineProperty</span><span class="token punctuation" data-v-5ff90988>(</span>person<span class="token punctuation" data-v-5ff90988>,</span> <span class="token string" data-v-5ff90988>&quot;name&quot;</span><span class="token punctuation" data-v-5ff90988>,</span> <span class="token punctuation" data-v-5ff90988>{</span>
  configurable<span class="token operator" data-v-5ff90988>:</span> <span class="token boolean" data-v-5ff90988>false</span><span class="token punctuation" data-v-5ff90988>,</span>
  value<span class="token operator" data-v-5ff90988>:</span> <span class="token string" data-v-5ff90988>&quot;Niko&quot;</span><span class="token punctuation" data-v-5ff90988>,</span>
<span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span>
<span class="token comment" data-v-5ff90988>// 抛出错误</span>
Object<span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>defineProperty</span><span class="token punctuation" data-v-5ff90988>(</span>person<span class="token punctuation" data-v-5ff90988>,</span> <span class="token string" data-v-5ff90988>&quot;name&quot;</span><span class="token punctuation" data-v-5ff90988>,</span> <span class="token punctuation" data-v-5ff90988>{</span>
  configurable<span class="token operator" data-v-5ff90988>:</span> <span class="token boolean" data-v-5ff90988>true</span><span class="token punctuation" data-v-5ff90988>,</span>
  value<span class="token operator" data-v-5ff90988>:</span> <span class="token string" data-v-5ff90988>&quot;Niko&quot;</span><span class="token punctuation" data-v-5ff90988>,</span>
<span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span>
</code></pre><div class="line-numbers-wrapper" data-v-5ff90988><span class="line-number" data-v-5ff90988>1</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>2</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>3</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>4</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>5</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>6</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>7</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>8</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>9</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>10</span><br data-v-5ff90988></div></div><p data-v-5ff90988><span class="point_text" data-v-5ff90988>在调用 Object.defineProperty()方法创建一个新的属性时，如果不指定，configurable，Enumberable，Writable 特性的默认值都是 false。</span></p> <h3 id="二-访问器属性" data-v-5ff90988><a href="#二-访问器属性" class="header-anchor" data-v-5ff90988>#</a> 二 ：访问器属性</h3> <p data-v-5ff90988>访问器属性不包含数据值；它们包含一对 getter 和 setter 函数（不过，这两个函数都不是必需的）。在读取访问器属性时，会调用 getter 函数，这个函数负责返回有效的值；在写入访问器属性时，会调用 setter 函数并传入新值，这个函数负责决定如何处理数据。访问器属性有如下 4 个特性。</p> <ul data-v-5ff90988><li data-v-5ff90988>[[Configurable]]：表示能否通过 delete 删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为访问器属性。默认值为 true。</li> <li data-v-5ff90988>[[Enumberable]]：表示能否通过 for-in 循环返回属性。默认值为 true。</li> <li data-v-5ff90988>[[Get]]：在读取属性时调用的函数。默认值为 undefined。</li> <li data-v-5ff90988>[[Set]]：在写入属性时调用的函数。默认值为 undefined。</li></ul> <p data-v-5ff90988><span class="point_text" data-v-5ff90988>访问器属性不能直接定义，必须使用 Object.defineProperty()来定义。请看下面的例子。</span></p> <div class="language-JS line-numbers-mode" data-v-5ff90988><pre class="language-js" data-v-5ff90988><code data-v-5ff90988><span class="token keyword" data-v-5ff90988>var</span> book <span class="token operator" data-v-5ff90988>=</span> <span class="token punctuation" data-v-5ff90988>{</span>
    _year<span class="token operator" data-v-5ff90988>:</span> <span class="token number" data-v-5ff90988>2004</span><span class="token punctuation" data-v-5ff90988>,</span>
    edition<span class="token operator" data-v-5ff90988>:</span> <span class="token number" data-v-5ff90988>1</span>
<span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>;</span>

Object<span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>defineProperty</span><span class="token punctuation" data-v-5ff90988>(</span>book<span class="token punctuation" data-v-5ff90988>,</span> <span class="token string" data-v-5ff90988>&quot;year&quot;</span><span class="token punctuation" data-v-5ff90988>,</span> <span class="token punctuation" data-v-5ff90988>{</span>
    <span class="token function-variable function" data-v-5ff90988>get</span><span class="token operator" data-v-5ff90988>:</span> <span class="token keyword" data-v-5ff90988>function</span><span class="token punctuation" data-v-5ff90988>(</span><span class="token punctuation" data-v-5ff90988>)</span> <span class="token punctuation" data-v-5ff90988>{</span>
        <span class="token keyword" data-v-5ff90988>return</span> <span class="token keyword" data-v-5ff90988>this</span><span class="token punctuation" data-v-5ff90988>.</span>_year<span class="token punctuation" data-v-5ff90988>;</span>
    <span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>,</span>
    <span class="token function-variable function" data-v-5ff90988>set</span><span class="token operator" data-v-5ff90988>:</span> <span class="token keyword" data-v-5ff90988>function</span><span class="token punctuation" data-v-5ff90988>(</span><span class="token parameter" data-v-5ff90988>newValue</span><span class="token punctuation" data-v-5ff90988>)</span> <span class="token punctuation" data-v-5ff90988>{</span>
        <span class="token keyword" data-v-5ff90988>if</span> <span class="token punctuation" data-v-5ff90988>(</span>newValue <span class="token operator" data-v-5ff90988>&gt;</span> <span class="token number" data-v-5ff90988>2004</span><span class="token punctuation" data-v-5ff90988>)</span> <span class="token punctuation" data-v-5ff90988>{</span>
            <span class="token keyword" data-v-5ff90988>this</span><span class="token punctuation" data-v-5ff90988>.</span>_year <span class="token operator" data-v-5ff90988>=</span> newValue<span class="token punctuation" data-v-5ff90988>;</span>
            <span class="token keyword" data-v-5ff90988>this</span><span class="token punctuation" data-v-5ff90988>.</span>edition <span class="token operator" data-v-5ff90988>+=</span> newValue <span class="token operator" data-v-5ff90988>-</span> <span class="token number" data-v-5ff90988>2004</span><span class="token punctuation" data-v-5ff90988>;</span>
        <span class="token punctuation" data-v-5ff90988>}</span>
    <span class="token punctuation" data-v-5ff90988>}</span>
<span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span>

book<span class="token punctuation" data-v-5ff90988>.</span>year <span class="token operator" data-v-5ff90988>=</span> <span class="token number" data-v-5ff90988>2005</span><span class="token punctuation" data-v-5ff90988>;</span>
<span class="token function" data-v-5ff90988>alert</span><span class="token punctuation" data-v-5ff90988>(</span>book<span class="token punctuation" data-v-5ff90988>.</span>edition<span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span> <span class="token comment" data-v-5ff90988>//2</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ff90988><span class="line-number" data-v-5ff90988>1</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>2</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>3</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>4</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>5</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>6</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>7</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>8</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>9</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>10</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>11</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>12</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>13</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>14</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>15</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>16</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>17</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>18</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>19</span><br data-v-5ff90988></div></div><p data-v-5ff90988><span class="warn_text" data-v-5ff90988>定义多个属性</span></p> <div class="language-JS line-numbers-mode" data-v-5ff90988><pre class="language-js" data-v-5ff90988><code data-v-5ff90988><span class="token keyword" data-v-5ff90988>var</span> book <span class="token operator" data-v-5ff90988>=</span> <span class="token punctuation" data-v-5ff90988>{</span><span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>;</span>

Object<span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>defineProperties</span><span class="token punctuation" data-v-5ff90988>(</span>book<span class="token punctuation" data-v-5ff90988>,</span> <span class="token punctuation" data-v-5ff90988>{</span>
    _year<span class="token operator" data-v-5ff90988>:</span> <span class="token punctuation" data-v-5ff90988>{</span>
        writable<span class="token operator" data-v-5ff90988>:</span> <span class="token boolean" data-v-5ff90988>true</span><span class="token punctuation" data-v-5ff90988>,</span>
        value<span class="token operator" data-v-5ff90988>:</span> <span class="token number" data-v-5ff90988>2004</span>
    <span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>,</span>
    edition<span class="token operator" data-v-5ff90988>:</span> <span class="token punctuation" data-v-5ff90988>{</span>
        writable<span class="token operator" data-v-5ff90988>:</span> <span class="token boolean" data-v-5ff90988>true</span><span class="token punctuation" data-v-5ff90988>,</span>
        value<span class="token operator" data-v-5ff90988>:</span> <span class="token number" data-v-5ff90988>1</span>
    <span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>,</span>
    year<span class="token operator" data-v-5ff90988>:</span> <span class="token punctuation" data-v-5ff90988>{</span>
        <span class="token function-variable function" data-v-5ff90988>get</span><span class="token operator" data-v-5ff90988>:</span> <span class="token keyword" data-v-5ff90988>function</span><span class="token punctuation" data-v-5ff90988>(</span><span class="token punctuation" data-v-5ff90988>)</span> <span class="token punctuation" data-v-5ff90988>{</span>
            <span class="token keyword" data-v-5ff90988>return</span> <span class="token keyword" data-v-5ff90988>this</span><span class="token punctuation" data-v-5ff90988>.</span>_year<span class="token punctuation" data-v-5ff90988>;</span>
        <span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>,</span>
        <span class="token function-variable function" data-v-5ff90988>set</span><span class="token operator" data-v-5ff90988>:</span> <span class="token keyword" data-v-5ff90988>function</span><span class="token punctuation" data-v-5ff90988>(</span><span class="token punctuation" data-v-5ff90988>)</span> <span class="token punctuation" data-v-5ff90988>{</span>
        <span class="token keyword" data-v-5ff90988>if</span> <span class="token punctuation" data-v-5ff90988>(</span>newValue <span class="token operator" data-v-5ff90988>&gt;</span> <span class="token number" data-v-5ff90988>2004</span><span class="token punctuation" data-v-5ff90988>)</span> <span class="token punctuation" data-v-5ff90988>{</span>
            <span class="token keyword" data-v-5ff90988>this</span><span class="token punctuation" data-v-5ff90988>.</span>_year <span class="token operator" data-v-5ff90988>=</span> newValue<span class="token punctuation" data-v-5ff90988>;</span>
            <span class="token keyword" data-v-5ff90988>this</span><span class="token punctuation" data-v-5ff90988>.</span>edition <span class="token operator" data-v-5ff90988>+=</span> newValue <span class="token operator" data-v-5ff90988>-</span> <span class="token number" data-v-5ff90988>2004</span><span class="token punctuation" data-v-5ff90988>;</span>
        <span class="token punctuation" data-v-5ff90988>}</span>
        <span class="token punctuation" data-v-5ff90988>}</span>
    <span class="token punctuation" data-v-5ff90988>}</span>
<span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ff90988><span class="line-number" data-v-5ff90988>1</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>2</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>3</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>4</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>5</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>6</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>7</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>8</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>9</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>10</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>11</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>12</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>13</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>14</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>15</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>16</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>17</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>18</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>19</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>20</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>21</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>22</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>23</span><br data-v-5ff90988></div></div><h2 id="数据劫持" data-v-5ff90988><a href="#数据劫持" class="header-anchor" data-v-5ff90988>#</a> 数据劫持</h2> <p data-v-5ff90988>经过以上简单介绍对象的属性类型和 Object.defineProperty()方法，相信大家都已经想到了数据劫持实现方法了，实际就是使用对象访问器属性的 getter 和 setter 函数对数据变化进行拦截通知，下面直接上代码。</p> <div class="language-ts line-numbers-mode" data-v-5ff90988><pre class="language-ts" data-v-5ff90988><code data-v-5ff90988><span class="token keyword" data-v-5ff90988>let</span> obj <span class="token operator" data-v-5ff90988>=</span> <span class="token punctuation" data-v-5ff90988>{</span>
  name<span class="token operator" data-v-5ff90988>:</span> <span class="token string" data-v-5ff90988>&quot;xiaoli&quot;</span><span class="token punctuation" data-v-5ff90988>,</span>
  likes<span class="token operator" data-v-5ff90988>:</span> <span class="token punctuation" data-v-5ff90988>[</span><span class="token string" data-v-5ff90988>&quot;speak&quot;</span><span class="token punctuation" data-v-5ff90988>,</span> <span class="token string" data-v-5ff90988>&quot;dance&quot;</span><span class="token punctuation" data-v-5ff90988>]</span><span class="token punctuation" data-v-5ff90988>,</span>
<span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>;</span>

<span class="token comment" data-v-5ff90988>// 遍历对象所有属性，给每个属性绑定拦截器</span>
<span class="token keyword" data-v-5ff90988>function</span> <span class="token function" data-v-5ff90988>observe</span><span class="token punctuation" data-v-5ff90988>(</span>obj<span class="token operator" data-v-5ff90988>:</span> <span class="token builtin" data-v-5ff90988>any</span><span class="token punctuation" data-v-5ff90988>)</span> <span class="token punctuation" data-v-5ff90988>{</span>
  Object<span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>keys</span><span class="token punctuation" data-v-5ff90988>(</span>obj<span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>forEach</span><span class="token punctuation" data-v-5ff90988>(</span><span class="token punctuation" data-v-5ff90988>(</span>element<span class="token punctuation" data-v-5ff90988>)</span> <span class="token operator" data-v-5ff90988>=&gt;</span> <span class="token punctuation" data-v-5ff90988>{</span>
    <span class="token function" data-v-5ff90988>reactive</span><span class="token punctuation" data-v-5ff90988>(</span>obj<span class="token punctuation" data-v-5ff90988>,</span> element<span class="token punctuation" data-v-5ff90988>,</span> obj<span class="token punctuation" data-v-5ff90988>[</span>element<span class="token punctuation" data-v-5ff90988>]</span><span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span>
  <span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span>
<span class="token punctuation" data-v-5ff90988>}</span>

<span class="token comment" data-v-5ff90988>// 定义一个拦截器，劫持数据的变化并通知。</span>
<span class="token keyword" data-v-5ff90988>function</span> <span class="token function" data-v-5ff90988>reactive</span><span class="token punctuation" data-v-5ff90988>(</span>obj<span class="token operator" data-v-5ff90988>:</span> object<span class="token punctuation" data-v-5ff90988>,</span> key<span class="token operator" data-v-5ff90988>:</span> <span class="token builtin" data-v-5ff90988>string</span><span class="token punctuation" data-v-5ff90988>,</span> value<span class="token operator" data-v-5ff90988>:</span> <span class="token builtin" data-v-5ff90988>string</span> <span class="token operator" data-v-5ff90988>|</span> <span class="token builtin" data-v-5ff90988>Array</span><span class="token operator" data-v-5ff90988>&lt;</span><span class="token builtin" data-v-5ff90988>string</span><span class="token operator" data-v-5ff90988>&gt;</span><span class="token punctuation" data-v-5ff90988>)</span> <span class="token punctuation" data-v-5ff90988>{</span>
  Object<span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>defineProperty</span><span class="token punctuation" data-v-5ff90988>(</span>obj<span class="token punctuation" data-v-5ff90988>,</span> key<span class="token punctuation" data-v-5ff90988>,</span> <span class="token punctuation" data-v-5ff90988>{</span>
    <span class="token function-variable function" data-v-5ff90988>get</span><span class="token operator" data-v-5ff90988>:</span> <span class="token keyword" data-v-5ff90988>function</span><span class="token punctuation" data-v-5ff90988>(</span><span class="token punctuation" data-v-5ff90988>)</span> <span class="token punctuation" data-v-5ff90988>{</span>
      <span class="token builtin" data-v-5ff90988>console</span><span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>log</span><span class="token punctuation" data-v-5ff90988>(</span><span class="token string" data-v-5ff90988>&quot;获取参数&quot;</span><span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span>
      <span class="token keyword" data-v-5ff90988>return</span> value<span class="token punctuation" data-v-5ff90988>;</span>
    <span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>,</span>
    <span class="token function-variable function" data-v-5ff90988>set</span><span class="token operator" data-v-5ff90988>:</span> <span class="token keyword" data-v-5ff90988>function</span><span class="token punctuation" data-v-5ff90988>(</span>newVal<span class="token punctuation" data-v-5ff90988>)</span> <span class="token punctuation" data-v-5ff90988>{</span>
      <span class="token builtin" data-v-5ff90988>console</span><span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>log</span><span class="token punctuation" data-v-5ff90988>(</span><span class="token string" data-v-5ff90988>&quot;设置参数&quot;</span><span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span>
      value <span class="token operator" data-v-5ff90988>=</span> newVal<span class="token punctuation" data-v-5ff90988>;</span>
    <span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>,</span>
  <span class="token punctuation" data-v-5ff90988>}</span><span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span>
<span class="token punctuation" data-v-5ff90988>}</span>
<span class="token function" data-v-5ff90988>observe</span><span class="token punctuation" data-v-5ff90988>(</span>obj<span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span>
obj<span class="token punctuation" data-v-5ff90988>.</span>name <span class="token operator" data-v-5ff90988>=</span> <span class="token string" data-v-5ff90988>&quot;xiaowang&quot;</span><span class="token punctuation" data-v-5ff90988>;</span> <span class="token comment" data-v-5ff90988>// 这里进行的赋值操作，故见下图&quot;设置参数&quot;出现一次</span>
<span class="token builtin" data-v-5ff90988>console</span><span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>log</span><span class="token punctuation" data-v-5ff90988>(</span><span class="token constant" data-v-5ff90988>JSON</span><span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>stringify</span><span class="token punctuation" data-v-5ff90988>(</span>obj<span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span> <span class="token comment" data-v-5ff90988>// 这里进行的读取操作，故见下图&quot;获取参数&quot;出现两次</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ff90988><span class="line-number" data-v-5ff90988>1</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>2</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>3</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>4</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>5</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>6</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>7</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>8</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>9</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>10</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>11</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>12</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>13</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>14</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>15</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>16</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>17</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>18</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>19</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>20</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>21</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>22</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>23</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>24</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>25</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>26</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>27</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>28</span><br data-v-5ff90988></div></div><p data-v-5ff90988><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZQAAABeCAYAAAAEweLGAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAp4SURBVHhe7d1PjxVLGcfxeS28CHds9BXAVheEV8ALkMREN+xFoytcCokLDSuDxJWYeAkhUWNIrhuZhYsRAeGKYOvv3PldnvtMVXX1OTU9M5zvJ6mc7vrTXV1dXc/5w9x78OrVq4lEIpFIpF3TwZMnTyYSiUQikXZNBxMAAAMQUAAAQxBQAABDEFAAAEMQUAAAQ6wSUC5dunS89SXtx5Tl8lIqqeXX5PpL2wMAPlrtE0pcrGvbVipf0iZq1a29AgCWO5OvvOLCXVrElTeXolJ5TiU5v1YPADDvXAaUbMlCP1dX5aVUKgMA9Dv1gJIX6NJCnct70zb1LefVtgEAfc7kN5SletrmOt4vtY1lsbzVBgDQtnpA8SKeU1aq45TFvFKdXG7err0CAPqdySeUvGCXFvDaol5rq9dambTKzHmlMgBA25l95TW3eC/Nj1Sn1T4n83bMAwD0WTWg5IW6tXDHstq2KS+mLOfF/VYZAKDfhfiEUttuUT2nklKZ92ttAAB1qwUUqy3kcTHvTdYqy3K5t3Ob1jEAACetHlAAAJ8mAgoAYAgCCgBgiIMXL15MJBKJRCLtmviEAgAYgoACABiCgAIAGGKrgPLi1dvp1797Nv3o57+fvv+T30zf+/GDzav2la9yAMB+WRxQPvvT86+CSC2pXPXm1P54cOQfFS49Fn/gCADbWRRQFCRKAaSWakFFi3RvatWfU6tTynde7RUA0NYdUPQ11twnk5xUv/X1V22xLuXHvLjYxxTlslIqyfm1egCAr+sOKPptJAeMvx+9Pi6dppevv5h+9svHJ+qoXdazaLfqlLZLx7BWmai8lEplAICy7oCiH9xjoPjtH/46/evtu+kXD/64Sf9+9376/G9HX6ujpHYlccGO4n7ejsm8nfN6U5TzatsAgJO6A0rr6y59MtEnFH1iyWVqV1NapGsL99xC33Osnrp6jeWtNgCAj4YEFH1aef/hQ/ETSimgxEXb27Vkrfz4arnOXLl5u/YKACjb+isvJ386qf2GUvvKy/JCXVu4Y35pu5YX86VUz/K+OK9UBgD4aKcf5eeCiVLpR3nTIh0X6tbineuV2rXkNpHLYjJvxzwAwEndAaX0z4b1m4l+jNeP8jHfSfVL/2w4Lto9i7frxxTlfWnVl5wX91tlAICy7oAi8Q8bH//55B8t5uCy5K/llyzisazWvkR1nEpKZd6vtQEAfGlRQBEFidYP9EoqnwsmcfGuLdZz+bk87ms7p5pc7u3cpnUMANh3iwOK6Gss/TaiH9wdXPSqfeW3/joeAPBp2iqgAACQEVAAAEPw/5QnkUgk0pDEJxQAwBAEFADAEAQUAMAQBBQAwBAEFADAEASUlT169Gi6evXqdHR0dJyD6M2bN9ONGzemu3fvHucAuChWCyheKPSfL9GiKlpUtbhq/9atW5u0tm374LpLA8RFDCjPnj2brly5Mj19+rR7sa+1ifOgNA61gOKxHkXH13nUP/VT/e2hfqjvcR7LtvNhFPX/5s2bm/HLtrl/vc+Fy9fWun8q8z2K16q+Kk/tSuOE3a0WUEoTT5P2+vXrm8nQmrSnads+qJ4m61ktIGvS2GiMnj9/3r0gzbXReCm/d9w03hrrUdQfHVP9XBpQSv046/mg/rcCytL71/tclJ7rNfTcP9XJ1+o3LCPnEj5aNaDkmxsnbb75t2/fnu7cuXPinYYnhPO1rTwvUEqXL1/+qq3b6RzKV1584Ft9ELfLE9ALiMr9ILtvfsB0bJ1L9WK/84IT+xb7LD6Gy9QPHUvnVDuLearj+m4jOpb6pnrK1zl9jNg/J1+H6miM3D6PRclcG+XrfHq12O98H+IxVBb7HtvpmLoW0bHj2MVjalvHLPXD7XIfpHb9yld99Sku7LU+KF9tSvdCVFbqd7xWJfclntfn1DFctvT+qW7tuVBenK8+T55D8V7UnmfJ7WJZbRy0rTL1M98/U53YxnrHAMutFlBqN7dGN90TMj4QmY+rMi8Cbvvw4cPipNNk8rHn+OHpnYA6phf20jXnvmSxvR80n1tt/JDrAdWryloPVsxXigulxypv67i18R4l9isrjZv6pmtV0jW4nfoaF/B8Tfk4PfI4Re5Hr1of8jl0TI2HriO2yXMgimPocXBe6Zwj6Pieg6J+ebyzeB2q4+vL80tlpf7G9q1xqInto1o+dnfqAUWTpvZwtsQH1w9JnIB+1+J3LrGO23qy6zXWV/LkPg16YBSESufI1yLa1hi5b363Wqrr6/GrAou29XWGXv3AxneQXoDz8Xwc0Rh6Oz/wpyH3JSo98OpbvBZTPV+nk6/D9937I+hYOm6vWh/y9Xv/8PBw8xqvR8nnrN3bmJ/HbqQ4ZyTva9t9i32J4xavPW5HDiDxWEo+Ro/SPDLl57mE3Z3rTyilCai8OBF83FjHbZW8rde16OHWu0WdsyegqJ77p/r+hFKrq+vRNesrBKV79+5N9+/f3wQXP4ge63iMfLw4Ltre9sHdRu5L5HsaqZ+61tIPsLlu5mvzte7C479U7kO+fl2TgrgCiu9/1rq3nnOed6dF1xGPH/e1XXo2JY5b7HfcjuJzsK3a3KjlY3dn+htKS20CKk/bmnDa1wTWcWMdt1XStvLix/Ql1Ebv/NyXOfFc6pcfNov9NNXx2Og8/oTiBcTnVp4XVOWpTF/rafvatWub4+Q2Oq4f8nxu1XH/9Oo2S6nt0nd7uS+R+uzxMPcvjoHotefTlOppgdL4zNGxPK+yXcYp9iFfv87lexG3o9a9jcdW21L7Gh3Hc25OHG+Pk8+lfql/vr44hqrjfqvM1+5rcr2oNg691L503NgXjHXhAoonoN7tacLqXbmOG+u4rZInpLb97lupty96gHoDSn44vK8+qF/qb+yDylTH51CeFoX4ziyWKbkfsV8+ts8br1Xj43GJY+R6tfFR8rnm6Ly9C1JrHHScmK/kPsT54L56P7eLbUr5c/J4RrEfPWp9yOPgMRDPG5epXrxnzo/3VmPvgOL28ZgtPmbvdfma1C99Mta+xH6rzM+mxHFTf91v78excJvWOPTQcUbcQ/RbNaB44uF80YMbg5joQey9X7q3Sx/2i2rUYpQX1bOk+77kn05fFKWA4iBFQDkdqwWU+G6Dm3n+6MHzO0El3Svdsxbf030JJqKA4jHaZR6fl4Ci6+n9dHlRxLkcA4ruV+/cxnZWCygAgE8bAQUAMAT/C2ASiUQiDUl8QgEADEFAAQAMQUABAAxx6gHl4ICYBQD7gIACABiCgAIAGKJ7tf/pgy+mvxy+P97rR0ABgP3Qtdq/fPvf6Zs/eDl96/9paVAhoADAfuhe7RVUvv3D15ug8tnn/znOnUdAAYD9sGi1d1D5xnf/Of3q8bvj3DYCCgDsh8UB5Tu3CSgAgJO6V/vDf3zYBBP9lsJXXgCArGu194/ySvwoDwAo6V7t+WfDAICWU1/tCSgAsB8IKACAIQgoAIAhWO0BAEMQUAAAQxBQAABDEFAAAEMQUAAAQxBQAABDEFAAAEMQUAAAQxBQAABDEFAAAEMQUAAAQxBQAABDEFAAAEMQUAAAQxBQAAADTNP/AIDSBAn00n1JAAAAAElFTkSuQmCC" alt="RUNOOB 图标" data-v-5ff90988></p> <h2 data-v-5ff90988>总结：以上即为简单的数据劫持模型</h2> <p data-v-5ff90988><span class="point_text" data-v-5ff90988>特别注意:setter 函数不能劫持到以下几种情况</span></p> <p data-v-5ff90988>1：不能检测以下数组的变动</p> <ul data-v-5ff90988><li data-v-5ff90988>当你利用索引直接设置一个数组项时 例如 <span class="warn_code" data-v-5ff90988><code data-v-5ff90988>arr[indexOfItem] = newValue</code></span></li> <li data-v-5ff90988>当你修改数组的长度时，例如：<span class="warn_code" data-v-5ff90988><code data-v-5ff90988>arr.length = newLength</code></span></li></ul> <p data-v-5ff90988><span class="todo" data-v-5ff90988>TODO: 查阅资料，补充其他情况。</span></p> <p data-v-5ff90988>以上面例子举例：</p> <div class="language-js line-numbers-mode" data-v-5ff90988><pre class="language-js" data-v-5ff90988><code data-v-5ff90988><span class="token function" data-v-5ff90988>observe</span><span class="token punctuation" data-v-5ff90988>(</span>obj<span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span>
obj<span class="token punctuation" data-v-5ff90988>.</span>likes<span class="token punctuation" data-v-5ff90988>[</span><span class="token number" data-v-5ff90988>0</span><span class="token punctuation" data-v-5ff90988>]</span> <span class="token operator" data-v-5ff90988>=</span> <span class="token string" data-v-5ff90988>&quot;read&quot;</span><span class="token punctuation" data-v-5ff90988>;</span> <span class="token comment" data-v-5ff90988>// 这里实际只进入了getter，没有进入setter 故下图</span>
console<span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>log</span><span class="token punctuation" data-v-5ff90988>(</span><span class="token constant" data-v-5ff90988>JSON</span><span class="token punctuation" data-v-5ff90988>.</span><span class="token function" data-v-5ff90988>stringify</span><span class="token punctuation" data-v-5ff90988>(</span>obj<span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>)</span><span class="token punctuation" data-v-5ff90988>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ff90988><span class="line-number" data-v-5ff90988>1</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>2</span><br data-v-5ff90988><span class="line-number" data-v-5ff90988>3</span><br data-v-5ff90988></div></div><p data-v-5ff90988><img src="data:image/png;base64,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" alt="RUNOOB 图标" data-v-5ff90988></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/30/2021, 1:49:09 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog_github_page/guide/reduce.html" class="prev">
        reduce 函数
      </a></span> <span class="next"><a href="/blog_github_page/guide/lowcopyAnddeepCopy.html">
        数组的深拷贝和浅拷贝
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div><!----></div></div>
    <script src="/blog_github_page/assets/js/app.f54d6109.js" defer></script><script src="/blog_github_page/assets/js/2.50563eee.js" defer></script><script src="/blog_github_page/assets/js/3.1735bb09.js" defer></script>
  </body>
</html>
